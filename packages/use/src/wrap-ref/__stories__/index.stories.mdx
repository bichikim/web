import {Meta, Story, Canvas} from '@storybook/addon-docs/blocks'
import {wrapRef} from '../'
import {computed, h, ref} from 'vue-demi'

<Meta title="use/Wrap Ref"/>

# Wrap Ref

Ref 또는 Ref 가 아닌 값을 Ref 로 만듭니다. 입력된 값이 Ref 일 경우 리턴 되는 Ref가 바뀔 경우 입력된 Ref 도 바뀝니다.
bindValue false 로 입력된 Ref 가 리턴되는 Ref 에 의해 바뀌는 것을 막을 수 있습니다.
Wrap Ref or not Ref

export const Default = () => ({
  setup() {
    const fooRef = ref(0)
    const wrappedFooRef = wrapRef(fooRef)
    const unbindWrappedFooRef = wrapRef(fooRef, {bindValue: false})
    const computedFoo = computed(() => {
      return fooRef.value * 2
    })
    const computedFooWrappedRef = wrapRef(computedFoo)
    return () => (
      h('div', [
        h('div', `foo ${fooRef.value}`),
        h('div', `wrapped foo${wrappedFooRef.value}`),
        h('div', `unbind wrapped foo${unbindWrappedFooRef.value}`),
        h('div', `computed foo${computedFoo.value}`),
        h('div', `computed wrapped foo${computedFooWrappedRef.value}`),
        h('button', {onClick: () => (fooRef.value += 1)}, 'increase foo'),
        h('button', {onClick: () => (wrappedFooRef.value += 1)}, 'increase wrapped foo'),
        h('button', {onClick: () => (unbindWrappedFooRef.value += 1)}, 'increase unbind wrapped foo'),
        h('button', {onClick: () => (computedFooWrappedRef.value += 1)}, 'increase computed wrapped foo'),
      ])
    )
  },
})


<Canvas>
  <Story name="Default">
    {Default.bind({})}
  </Story>
</Canvas>


