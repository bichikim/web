import {Meta, Story, Canvas} from '@storybook/addon-docs/blocks'
import {animationRepeater} from '../'
import {h, ref} from 'vue-demi'

<Meta title="use/Animation Repeater"/>

# Animation Repeater

핸들러를 반복적으로 requestAnimationFrame 통하여 호출 합니다.
requestAnimationFrame 은 화면이 표시 되지 않을때는 작동 하지 않아 반복 작업 최적화에 도움이 됩니다.
Call Handle Repeatedly with the requestAnimationFrame

예제는 숫자를 1씩 올립니다.
toggle count 를 클릭하면 중지하거나 제게할 수 있습니다.

export const Template = () => ({
  setup() {
    const countRef = ref(0);
    function increaseCount() {
      countRef.value += 1
    }
    const toggleRef = animationRepeater(increaseCount)
    function toggleCount() {
      toggleRef.value = !toggleRef.value
    }
    return function () {
      return (
        h('div', [
          h('div', countRef.value),
          h('button', {onClick: toggleCount}, 'toggle count'),
        ])
      )
    }
  },
})


<Canvas>
  <Story name="Default">
    {Template.bind({})}
  </Story>
</Canvas>
